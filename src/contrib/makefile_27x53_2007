CPP = /usr/bin/g++
CPPFLAGS = -Wall -I../LIB -I../LIB/DISCRETA
LIB = \
	../LIB/DISCRETA/libdiscreta.a \
	../LIB/SNAKES_AND_LADDERS/libsnakesandladders.a  \
	../LIB/ACTION/libaction.a \
	../LIB/INCIDENCE/libincidence.a \
	../LIB/GALOIS/libgalois.a 
LFLAGS = -lm


all: 27x53.out

#design.out

# search_design.out orbits_on_pairs.out prepare_group.out 

# make_field.out

search_design.out:  search.c;
	cc search.c -o $@


orbits_on_pairs.out: orbits_on_pairs.C;
	g++ orbits_on_pairs.C -o orbits_on_pairs.out

prepare_group.out: $(LIB) prepare_group.o ;
	$(CPP)  prepare_group.o $(CPPFLAGS) $(LIB) $(LFLAGS) -o $@

make_field.out: $(LIB) make_field.o ;
	$(CPP)  make_field.o $(CPPFLAGS) $(LIB) $(LFLAGS) -o $@


design.out: $(LIB) design.o ;
	$(CPP)  design.o $(CPPFLAGS) $(LIB) $(LFLAGS) -o $@

27x53.out: $(LIB) 27x53.o ;
	$(CPP)  27x53.o $(CPPFLAGS) $(LIB) $(LFLAGS) -o $@


clean:
	- rm *.o *.out

test:
	./design.out -prefix test_ -maxdepth 4  -v  5 1 11 27 53 27x53_a2_b4_a0_b0.2orbits >test.log

# mask 1:
#  XX.
#  X.X

27x53_11:
	./27x53.out -v 4 -W -prefix M1_ -depth 4  -masktest 3 x ge 1 -masktest 4 x+y ge 3    1 >log11

27x53_12:
	./27x53.out -v 4 -W -prefix M1_ -depth 4  -masktest 3 x ge 1 -masktest 4 x+y ge 3    2 >log12

27x53_13:
	./27x53.out -v 4 -W -prefix M1_ -depth 4  -masktest 3 x ge 1 -masktest 4 x+y ge 3    3 >log13

27x53_14:
	./27x53.out -v 4 -W -prefix M1_ -depth 4  -masktest 3 x ge 1 -masktest 4 x+y ge 3    4 >log14

# 13 orbits in each case

# mask 2:
# XX..
# X...
# ..XX

27x53_21:
	./27x53.out -v 4 -W -prefix M2_ -depth  5  -masktest 4 x+y ge 1  -masktest 4 x+y le 2 -masktest 5 x+y eq 3 -masktest 5 s eq 0   1 >log21

27x53_22:
	./27x53.out -v 4 -W -prefix M2_ -depth  5  -masktest 4 x+y ge 1  -masktest 4 x+y le 2 -masktest 5 x+y eq 3 -masktest 5 s eq 0   2 >log22

27x53_23:
	./27x53.out -v 4 -W -prefix M2_ -depth  5  -masktest 4 x+y ge 1  -masktest 4 x+y le 2 -masktest 5 x+y eq 3 -masktest 5 s eq 0   3 >log23

27x53_24:
	./27x53.out -v 4 -W -prefix M2_ -depth  5  -masktest 4 x+y ge 1  -masktest 4 x+y le 2 -masktest 5 x+y eq 3 -masktest 5 s eq 0   4 >log24


# mask3:
# X....
# X....
# .XX..
# ...XX

27x53_31:
	./27x53.out -v 4 -W -prefix M3_ -depth  6  -masktest 4 x+y ge 1  -masktest 4 x+y le 2 -masktest 5 x+y eq 2   -masktest 5 s le 1 -masktest 6 x+y eq 3 -masktest 6 s eq 0    1 >log31

27x53_32:
	./27x53.out -v 4 -W -prefix M3_ -depth  6  -masktest 4 x+y ge 1  -masktest 4 x+y le 2 -masktest 5 x+y eq 2   -masktest 5 s le 1 -masktest 6 x+y eq 3 -masktest 6 s eq 0    2 >log32

27x53_33:
	./27x53.out -v 4 -W -prefix M3_ -depth  6  -masktest 4 x+y ge 1  -masktest 4 x+y le 2 -masktest 5 x+y eq 2   -masktest 5 s le 1 -masktest 6 x+y eq 3 -masktest 6 s eq 0    3 >log33

27x53_34:
	./27x53.out -v 4 -W -prefix M3_ -depth  6  -masktest 4 x+y ge 1  -masktest 4 x+y le 2 -masktest 5 x+y eq 2   -masktest 5 s le 1 -masktest 6 x+y eq 3 -masktest 6 s eq 0    4 >log34


