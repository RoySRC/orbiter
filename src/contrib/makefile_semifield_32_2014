MY_PATH=../../../DEV.14
#MY_PATH=/scratch/betten/COMPILE/2013_01_23
SRC=$(MY_PATH)/ORBITER/SRC
SRC2=$(MY_PATH)/ORBITER2/SRC2

SEMIFIELD_PATH=$(SRC)/SEMIFIELD
GRASSMANN_PATH=$(SRC2)/GRASSMANN


ORDER=32
DEPTH=5
POLY=


clean:
	- rm Candi*
	- rm semifield*
	- rm Level_*
	- rm C2_*


full:
	- rm Candi*
	$(SEMIFIELD_PATH)/semifield_main.out -v 5 \
		-order $(ORDER) \
		-compute 5

# needs too much memory



classify:
	- rm Candi*
	$(SEMIFIELD_PATH)/semifield_main.out -v 2 \
		-order $(ORDER) \
		-break_symmetry 5


# 7/28/2014 MacBook Pro: depth 5, 1 min 51 sec


#		-compute $(DEPTH) \
#Level 4, done with upstep, we found 2678 orbits



poset:
	$(SEMIFIELD_PATH)/layered_graph_main.out -v 4 \
		-file semifield_q32_lvl5.layered_graph \
		-draw semifield_q32_lvl5 \
		-rad 70 \
		-xin 1000000 \
		-yin 1000000 \
		-xout 1000000 \
		-yout 1000000 \
		-embedded\
		-y_stretch 0.8 \
		-nodes_empty
	mpost semifield_q32_lvl5.mp
	#pdflatex semifield_q32_lvl5.tex
	#open semifield_q32_lvl5.pdf

#		-select_layer 3 \
#		-select_layer 4 \



test_invariants:
	$(SEMIFIELD_PATH)/semifield_main.out -v 3 \
		-order $(ORDER) \
		-recoordinatize \
		-prefix semi_$(ORDER) \
		-test_invariants 3 semifields_q32_reps_level_5.csv 0 100

# 7/28/2014 MacBook Pro: depth 5, 2 min 45 sec, all OK

test_canon:
	$(SEMIFIELD_PATH)/semifield_main.out -v 3 \
		-order $(ORDER) \
		-recoordinatize \
		-prefix semi_$(ORDER) \
		-test_canonical_form 3 semifields_q32_reps_level_5.csv 0 10

canon:
	$(SEMIFIELD_PATH)/semifield_main.out -v 2 -order 32 \
		-compute_canonical_form \
		3 1 semifields_q32_reps_level_5.csv 0

deep:
	$(SEMIFIELD_PATH)/semifield_main.out -v 2 \
		-order $(ORDER) \
		-recoordinatize \
		-prefix semi_$(ORDER) \
		-deep_search 3 0 0 100000 


# find 412 solutions in 3 sec

h:
	$(SEMIFIELD_PATH)/harvest.out -v 2 -k 5 -case sol_0_1.txt
	mv harvest.csv sol_0_1.csv

c1:
	$(SEMIFIELD_PATH)/semifield_main.out -v 2 -order 32 \
		-compute_canonical_form \
		3 1 sol_0_1.csv 1

# 2 min 3 sec

c2:
	$(SEMIFIELD_PATH)/classify.out -v 2 -k 5 -file sol_0_1_canonical_reps.txt

# 0 sec


c3:
	$(SEMIFIELD_PATH)/semifield_main.out -v 2 -order 32 \
		-compute_canonical_form \
		3 1 sol_0_1_canonical_reps_classified.csv 1


randomize:
	$(SEMIFIELD_PATH)/semifield_main.out -v 4 -order 32 \
		-randomize 10 1 case_411.csv


cr:
	$(SEMIFIELD_PATH)/semifield_main.out -v 2 -order 32 \
		-compute_canonical_form \
		3 1 case_411_randomized.csv 1

Aut:
	$(SEMIFIELD_PATH)/semifield_main.out -v 2 \
		-order $(ORDER) \
		-compute_automorphism_group_from_file \
			3 semifields_q32_reps_level_5.csv 0 

read_gens2:
	$(SEMIFIELD_PATH)/semifield_main.out -v 2 \
		-order $(ORDER) \
		-recoordinatize \
		-prefix semi_$(ORDER) \
		-W \
		-read_stabilizers 2 
		


print:
	$(SEMIFIELD_PATH)/semifield_main.out -v 2 -order $(ORDER) \
		-print_representatives 1 \
		-recoordinatize \
		-prefix semi_$(ORDER) 


draw3:
	$(SEMIFIELD_PATH)/layered_graph_main.out -v 4 \
		-file semifield_q$(ORDER)_lvl3.layered_graph \
		-draw semifield_q$(ORDER)_lvl3 \
		-embedded
		mpost semifield_q$(ORDER)_lvl3.mp
		pdflatex semifield_q$(ORDER)_lvl3.tex
		open semifield_q$(ORDER)_lvl3.pdf

draw5:
	$(SEMIFIELD_PATH)/layered_graph_main.out -v 4 \
		-file semifield_q$(ORDER)_lvl5.layered_graph \
		-draw semifield_q$(ORDER)_lvl5
		mpost semifield_q$(ORDER)_lvl5.mp

draw5aux:
	$(SEMIFIELD_PATH)/layered_graph_main.out -v 4 \
		-file semifield_q$(ORDER)_lvl5_aux.layered_graph \
		-draw semifield_q$(ORDER)_lvl5_aux
		pdflatex semifield_q$(ORDER)_lvl5_aux.tex




