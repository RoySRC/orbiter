MY_PATH=~/DEV.19/GITHUB/orbiter
MY_PATH2=~/DEV.19/GITHUB/orbiter2
#MY_PATH=/scratch3/betten/COMPILE/2019_02_03
#MY_PATH2=/scratch3/betten/COMPILE/2019_02_03
SRC=$(MY_PATH)/ORBITER/src
SRC2=$(MY_PATH2)/ORBITER2/src

GRASSMANN_PATH=$(SRC2)/GRASSMANN
ALGEBRA_PATH=$(SRC)/apps/algebra
TOOLS_PATH=$(SRC)/apps/tools
COMBINATORICS_PATH=$(SRC)/apps/combinatorics
GRAPH_THEORY_PATH=$(SRC)/apps/graph_theory
PROJECTIVE_SPACE_PATH=$(SRC)/apps/projective_space

PACKINGS_PATH=$(SRC2)/PACKINGS
REGULAR_PACKING_PATH=$(SRC2)/REGULAR_PACKING
MATH161_PATH=$(SRC2)/MATH161


ORDER=16
Q=4
DEPTH=3
POLY=

ARGUMENTS= -order $(ORDER) -dim_over_kernel 2 -recoordinatize \
		-base_fname partial_packings_$(Q)_$(K)_ \
		-input_prefix ./STARTER_SPREADS/ \
		-output_prefix ./SYSTEMS/ \
		-solution_prefix ./SOLUTIONS/ \
		-starter_size $(DEPTH) 

get_poly:
	$(ALGEBRA_PATH)/get_poly.out -v 2 -primitive 4 4

# problems with -irred 4 4

classes:
	- $(PACKINGS_PATH)/packing_main.out -v 6 $(ARGUMENTS) \
		-conjugacy_classes
	pdflatex PGGL_4_4conjugacy_classes.tex 
	open PGGL_4_4conjugacy_classes.pdf

classes_and_normalizers:
	- $(PACKINGS_PATH)/packing_main.out -v 6 $(ARGUMENTS) \
		-conjugacy_classes_and_normalizers
	pdflatex PGGL_4_4conjugacy_classes_and_normalizers.tex 
	open PGGL_4_4conjugacy_classes_and_normalizers.pdf

4A:
	- $(PACKINGS_PATH)/prime_at_a_time_main.out -v 6 $(ARGUMENTS) \
		-group 4 0

4B:
	- $(PACKINGS_PATH)/prime_at_a_time_main.out -v 6 $(ARGUMENTS) \
		-group 4 1


################################################################################
### 4C
################################################################################

4C:
	- $(PACKINGS_PATH)/prime_at_a_time_main.out -v 6 $(ARGUMENTS) \
		-group 4 2

# finds 104 spreads which are fixed under 4C 
#(Svetlana's types S1=40 and S2=64 together)


4Cf:
	- $(PACKINGS_PATH)/prime_at_a_time_main.out -v 26 $(ARGUMENTS) \
		-group  4 2 \
		-cliques_on_fixpoint_graph 5


#depth : number of orbits
#0 : 1
#1 : 5
#2 : 32
#3 : 49
#4 : 0
#writes:
#packing_q4_go4_g2_fp_cliques_lvl_1
#packing_q4_go4_g2_fp_cliques_lvl_3




4Cl:
	- $(PACKINGS_PATH)/prime_at_a_time_main.out -v 6 $(ARGUMENTS) \
		-group  4 2 \
		-process_long_orbits 3 0 1 4 4

#-process_long_orbits
#			clique_size = atoi(argv[++i]);
#			start = atoi(argv[++i]);
#			nb_cases = atoi(argv[++i]);
#			long_orbit_length = atoi(argv[++i]);
#			long_orbits_clique_size = atoi(argv[++i]);


4Cc0_0:
	$(PROJECTIVE_SPACE_PATH)/canonical_form.out -v 2 \
		-q 4 -n 3 \
		-input -file_of_packings_through_spread_table \
			packing_q4_go4_g2_csz3_cno0_m0_solutions.txt Spread_table.csv -end \
		-classify_nauty 





4Cctest:
	$(PROJECTIVE_SPACE_PATH)/canonical_form.out -v 2 \
		-q 4 -n 3 \
		-input -file_of_packings_through_spread_table \
			packing_q4_go4_g2_csz3_clique2_solutions.txt \
			Spread_table.csv -end \
		-classify_nauty \
		-save packing_q4_go4_g2_csz3_clique2_solutions


#			packing_q4_go4_g2_csz3_clique2_solutions.txt \

4Cmerge:
	$(PACKINGS_PATH)/collect_ago.out -v 2 \
		-fill_table packing_q4_go4_g2_csz3_cno0_mod1_detailed_nb_sol.csv \
		-idx Case \
		-idx middle_case \
		-file packing_q4_go4_g2_csz3_cno%d_m%d_iso.txt_classified.cvs \
		-ago_label ago \
		-merge 4 3 Spread_table.csv 

4Cago:
	$(PACKINGS_PATH)/collect_ago.out -v 2 \
		-file packing_q4_go4_g2_csz3_cno0_mod1_detailed_nb_sol.csv_classified.cvs \
		-ago_label ago 

################################################################################
### 4D
################################################################################


4D:
	- $(PACKINGS_PATH)/prime_at_a_time_main.out -v 6 $(ARGUMENTS) \
		-group  4 3 

4Df:
	- $(PACKINGS_PATH)/prime_at_a_time_main.out -v 6 $(ARGUMENTS) \
		-group  4 3 \
		-cliques_on_fixpoint_graph 5

#depth : number of orbits
#0 : 1
#1 : 3
#2 : 0
#3 : 0

4Dl:
	- $(PACKINGS_PATH)/prime_at_a_time_main.out -v 6 $(ARGUMENTS) \
		-group  4 3 \
		-process_long_orbits 1 0 1 4 4

#case 0/3:
#depth 2 completed, found 410 orbits
#0 : 1 orbits
#1 : 100 orbits
#2 : 410 orbits
#total: 511
#(8^4, 4^{406}) average is 4 + 16 / 410

#case 1/3:
# 410 orbits at depth 2

#case 2/3:
# 750 orbits at depth 2

#Written file packing_q4_go4_g3_csz1_cno0_mod1_nb_sol.csv of size 138
#opening file packing_q4_go4_g3_csz1_cno0_mod1_detailed_nb_sol.csv for writing
#Written file packing_q4_go4_g3_csz1_cno0_mod1_detailed_nb_sol.csv of size 35968


4Dmerge:
	$(PACKINGS_PATH)/collect_ago.out -v 2 \
		-fill_table packing_q4_go4_g3_csz1_cno0_mod1_detailed_nb_sol.csv \
		-idx Case \
		-idx middle_case \
		-file packing_q4_go4_g3_csz1_cno%d_m%d_iso.txt_classified.cvs \
		-ago_label ago \
		-merge 4 3 Spread_table.csv 

4Dago:
	$(PACKINGS_PATH)/collect_ago.out -v 2 \
		-file packing_q4_go4_g3_csz1_cno0_mod1_detailed_nb_sol.csv_classified.cvs \
		-ago_label ago 


