#MY_PATH=../../../DEV.16
MY_PATH=/scratch2/betten/COMPILE/2016_01_10
SRC=$(MY_PATH)/ORBITER/SRC
SRC2=$(MY_PATH)/ORBITER2/SRC2

REGULAR_PACKING_PATH=$(SRC2)/REGULAR_PACKING
GRASSMANN_PATH=$(SRC2)/GRASSMANN
TOOLS_PATH=$(SRC)/APPS/TOOLS


Q=5
K=2
NO=12
# NO is the number of the regular spread in the classification of regular packings that is stored in GALOIS
POLY=
DEPTH=4

LIFT_ARGS = -q $(Q) -k $(K) -no $(NO) \
		-starter_size $(DEPTH) \
		-lift \
		-base_fname partial_packings_$(Q)_$(K)_ \
		-input_prefix ./STARTER_REGULAR_SPREADS/ \
		-output_prefix ./SYSTEMS/ \
		-solution_prefix ./SOLUTIONS/ \

init:
	$(REGULAR_PACKING_PATH)/regular_packing_main.out -v 5 -q $(Q) -k $(K) -no $(NO) 

klein:
	$(REGULAR_PACKING_PATH)/klein.out -v 2 -q $(Q)

RP:
	$(REGULAR_PACKING_PATH)/regular_packing_main.out -v 2 -q $(Q) -k $(K) -no $(NO) 

starter:
	$(REGULAR_PACKING_PATH)/regular_packing_main.out -v 5 -q $(Q) -k $(K) -no $(NO) \
		-starter \
		-starter_size $(DEPTH) \
		-W


# partial packings under PGL(4,q):
#1 : 1 orbits
#2 : 6 orbits
#3 : 2890 orbits
#4 : 12224417 orbits


# Jan 3, 2016 on MacBookPro: 3 hrs 12 min 29
# partial packings under PO^+(6,q):
#1 : 1 orbits
#2 : 6 orbits
#3 : 2096 orbits
#4 : 6238938 orbits
# stablizer orders at level 4: (96^8, 72^4, 48^{42}, 32, 24^{304}, 16^{10}, 12^{2116}, 8^{104}, 6^{91}, 4^{2978}, 3^{60}, 2^{254417}, 1^{5978803}) average is 1 + 298121 / 6238938


group31:
	$(REGULAR_PACKING_PATH)/regular_packing_main.out -v 5 -q $(Q) -k $(K) -no $(NO) \
		-group 31 

subsets:
	$(REGULAR_PACKING_PATH)/regular_packing_main.out -v 5 -q $(Q) -k $(K) -no $(NO) \
		-classify_subsets 3 packings.csv 

subsets_18_0:
	$(REGULAR_PACKING_PATH)/regular_packing_main.out -v 5 -q $(Q) -k $(K) -no $(NO) \
		-starter_size $(DEPTH) \
		-input_prefix ./STARTER_REGULAR_SPREADS/ \
		-identify_subsets packings_case_18_0.csv

subgroup:
	$(REGULAR_PACKING_PATH)/regular_packing_main.out -v 5 -q $(Q) -k $(K) -no $(NO) \
		-load_group packing_7_stab.bin 3 

load0:
	$(REGULAR_PACKING_PATH)/regular_packing_main.out -v 5 -q $(Q) -k $(K) -no $(NO) \
		-load_packing_and_group packing_0_as_external_lines.csv packing_0_stab.bin 

load7:
	$(REGULAR_PACKING_PATH)/regular_packing_main.out -v 5 -q $(Q) -k $(K) -no $(NO) \
		-load_packing_and_group packing_7_as_external_lines.csv packing_7_stab.bin 

cliques0:
	$(TOOLS_PATH)/all_rainbow_cliques.out -v 1 -file graph_0.bin -all_cliques -no_colors 10 -solution_file

cliques1:
	$(TOOLS_PATH)/all_rainbow_cliques.out -v 1 -file graph_1.bin -all_cliques -no_colors 10 -solution_file

cliques2:
	$(TOOLS_PATH)/all_rainbow_cliques.out -v 1 -file graph_2.bin -all_cliques -no_colors 10 -solution_file

cliques3:
	$(TOOLS_PATH)/all_rainbow_cliques.out -v 1 -file graph_3.bin -all_cliques -no_colors 10 -solution_file

cliques4:
	$(TOOLS_PATH)/all_rainbow_cliques.out -v 1 -file graph_4.bin -all_cliques -no_colors 10 -solution_file

cliques5:
	$(TOOLS_PATH)/all_rainbow_cliques.out -v 1 -file graph_5.bin -all_cliques -no_colors 10 -solution_file

cliques6:
	$(TOOLS_PATH)/all_rainbow_cliques.out -v 1 -file graph_6.bin -all_cliques -no_colors 10 -solution_file

cliques7:
	$(TOOLS_PATH)/all_rainbow_cliques.out -v 1 -file graph_7.bin -all_cliques -no_colors 10 -solution_file

cliques8:
	$(TOOLS_PATH)/all_rainbow_cliques.out -v 1 -file graph_8.bin -all_cliques -no_colors 10 -solution_file

cliques9:
	$(TOOLS_PATH)/all_rainbow_cliques.out -v 1 -file graph_9.bin -all_cliques -no_colors 10 -solution_file

cliques10:
	$(TOOLS_PATH)/all_rainbow_cliques.out -v 1 -file graph_10.bin -all_cliques -no_colors 10 -solution_file

cliques11:
	$(TOOLS_PATH)/all_rainbow_cliques.out -v 1 -file graph_11.bin -all_cliques -no_colors 10 -solution_file

cliques12:
	$(TOOLS_PATH)/all_rainbow_cliques.out -v 1 -file graph_12.bin -all_cliques -no_colors 10 -solution_file

cliques13:
	$(TOOLS_PATH)/all_rainbow_cliques.out -v 1 -file graph_13.bin -all_cliques -no_colors 10 -solution_file

cliques14:
	$(TOOLS_PATH)/all_rainbow_cliques.out -v 1 -file graph_14.bin -all_cliques -no_colors 10 -solution_file

cliques15:
	$(TOOLS_PATH)/all_rainbow_cliques.out -v 1 -file graph_15.bin -all_cliques -no_colors 10 -solution_file

cliques16:
	$(TOOLS_PATH)/all_rainbow_cliques.out -v 1 -file graph_16.bin -all_cliques -no_colors 10 -solution_file

cliques17:
	$(TOOLS_PATH)/all_rainbow_cliques.out -v 1 -file graph_17.bin -all_cliques -no_colors 10 -solution_file

cliques18:
	$(TOOLS_PATH)/all_rainbow_cliques.out -v 1 -file graph_18.bin -all_cliques -no_colors 10 -solution_file

cliques19:
	$(TOOLS_PATH)/all_rainbow_cliques.out -v 1 -file graph_19.bin -all_cliques -no_colors 10 -solution_file

r18:
	$(REGULAR_PACKING_PATH)/regular_packing_main.out -v 5 -q $(Q) -k $(K) -no $(NO) \
		-load_group packing_7_stab.bin 3  -read_cliques

c18:
	$(REGULAR_PACKING_PATH)/regular_packing_main.out -v 2 -q $(Q) -k $(K) -no $(NO) \
		-classify_subsets 3 packings_case_18_as_external_lines.csv

c18_0:
	$(REGULAR_PACKING_PATH)/regular_packing_main.out -v 5 -q $(Q) -k $(K) -no $(NO) \
		-classify_subsets 3 packings_case_18_0.csv



lift:
	- mkdir SYSTEMS
	- mkdir SOLUTIONS
	$(REGULAR_PACKING_PATH)/regular_packing_main.out -v 5 \
		$(LIFT_ARGS) \
		-solve  

#-lex
#-dimension 4

#dimension 3: no solutions
#dimension 4: 932 partial packings at depth 3 no solutions in 1 hr 3 min


lift_0:
	- mkdir SYSTEMS
	- mkdir SOLUTIONS
	$(REGULAR_PACKING_PATH)/regular_packing_main.out -v 3 \
		$(LIFT_ARGS) \
		-save \
		-split 0 10000000 


#		-solve  

lift_1000:
	- mkdir SYSTEMS
	- mkdir SOLUTIONS
	$(REGULAR_PACKING_PATH)/regular_packing_main.out -v 3 \
		$(LIFT_ARGS) \
		-save \
		-split 1000 10000000 \
		-solve




analyze:
	$(REGULAR_PACKING_PATH)/regular_packing_main.out -v 5 -q $(Q) -k $(K) -no $(NO) -analyze solution_case_134.txt

stab:
	$(REGULAR_PACKING_PATH)/regular_packing_main.out -v 5 -q $(Q) -k $(K) -no $(NO) -stabilizer solution_case_134.txt STARTER_REGULAR_SPREADS/partial_packings_5_2_ $(DEPTH)


read:
	$(REGULAR_PACKING_PATH)/regular_packing_main.out -v 5 -q $(Q) -k $(K) -no $(NO) -read_identify_subsets solution_case_134.txt STARTER_REGULAR_SPREADS/partial_packings_5_2_ $(DEPTH) identify_subsets.csv

#classification of orbits:
#( 6^21, 3^10443, 1^10 )



