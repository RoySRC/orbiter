MY_PATH=~/DEV.18/GITHUB/orbiter
MY_PATH2=~/DEV.18
#MY_PATH=/scratch3/betten/COMPILE/2018_04_17
SRC=$(MY_PATH)/ORBITER/SRC
SRC2=$(MY_PATH2)/ORBITER2/SRC2

PACKINGS_PATH=$(SRC2)/PACKINGS
REGULAR_PACKING_PATH=$(SRC2)/REGULAR_PACKING
GRASSMANN_PATH=$(SRC2)/GRASSMANN
ALGEBRA_PATH=$(SRC2)/ALGEBRA
TOOLS_PATH=$(SRC)/APPS/TOOLS
COMBINATORICS_PATH=$(SRC)/APPS/COMBINATORICS


ORDER=16
Q=4
DEPTH=3
POLY=

ARGUMENTS= -order $(ORDER) -dim_over_kernel 2 -recoordinatize \
		-base_fname partial_packings_$(Q)_$(K)_ \
		-input_prefix ./STARTER_SPREADS/ \
		-output_prefix ./SYSTEMS/ \
		-solution_prefix ./SOLUTIONS/ \
		-starter_size $(DEPTH) 


# group 0 give  27924 iso types with 1 fixpoint

# group 1 gives 216 iso types with 6 fixpoints

# group 2 gives 3732 iso types with 1 fixpoint


# total 31872



get_poly:
	$(ALGEBRA_PATH)/get_poly.out -v 2 -primitive 4 4

# problems with -irred 4 4

classes:
	- $(PACKINGS_PATH)/packing_main.out -v 6 $(ARGUMENTS) \
		-conjugacy_classes


# elements of order 2:
# conjugacy class reps:
# elt order, class size, centralizer order 

#2 48960 40320

#2 5355 368640

#2 64260 30720


normalform:
	$(ALGEBRA_PATH)/eigenstuff.out -q 4 -M 4 "1,0,0,0, 0,1,0,0, 1,1,1,0, 0,3,0,1"

# problem!


CLASS_2A=-centralizer_of_element "1,0,0,0, 0,1,0,0, 0,0,1,0, 0,0,0,1, 1" -label "2A"
CLASS_2B=-centralizer_of_element "1,0,0,0, 1,1,0,0, 0,0,1,0, 0,0,0,1, 0" -label "2B"
CLASS_2C=-centralizer_of_element "1,0,0,0, 1,1,0,0, 0,0,1,0, 0,0,1,1, 0" -label "2C"

centralizer2A:
	$(PACKINGS_PATH)/packing_main.out -v 6 $(ARGUMENTS) $(CLASS_2A)

centralizer2B:
	$(PACKINGS_PATH)/packing_main.out -v 6 $(ARGUMENTS) $(CLASS_2B)
		
centralizer2C:
	$(PACKINGS_PATH)/packing_main.out -v 6 $(ARGUMENTS) $(CLASS_2C)
	


G2A:
	- $(PACKINGS_PATH)/packing_main.out -v 6 $(ARGUMENTS) \
		-prime_at_a_time 2 0

#We found 2549064 orbits of the selected group
#Written file packing_q4_go2_g0_orbits.bin of size 163099834
#prime_at_a_time::test_orbits We found 92400 orbits which are partial packings
#Written file packing_q4_go2_g0_orbits_table.cvs of size 1427125
#prime_at_a_time::test_orbits The distribution of orbit lengths is: 1^1680, 2^90720
#i : type[i] : number of orbits
#0 : 1 : 1680
#1 : 2 : 90720
#Number of fixedpoints = 1680
#prime_at_a_time::create_graph_on_fixpoints creating the graph on fixpoints
#prime_at_a_time::create_graph nb_points=1680
#Written file packing_q4_go2_g0_fixpoint_graph.bin of size 189747
#time: 28:23


G2Aall_cliques:
	$(TOOLS_PATH)/all_cliques.out -v 2 \
		-file packing_q4_go2_g0_fixpoint_graph.bin \
		-all_cliques -print_level 7


#i : number of orbits of cliques of the fixedpoint graph of size i
#0 : 1
#1 : 1
#2 : 15
#3 : 508
#4 : 4334
#5 : 6656
#6 : 2379
#7 : 220
#8 : 0
#9 : 0
#Written file reps_at_level_6.txt of size 52181
#Written file reps_at_level_7.txt of size 5759


G2AC:
	- $(PACKINGS_PATH)/packing_main.out -v 6 $(ARGUMENTS) \
		-cliques_on_fixpoint_graph 2 0 7

#			group_order = atoi(argv[++i]);
#			group_idx = atoi(argv[++i]);
#			clique_size = atoi(argv[++i]);
#compute_orbits_on_subsets done
#depth : number of orbits
#0 : 1
#1 : 2
#2 : 27
#3 : 1016
#4 : 8663
#5 : 13312
#6 : 4758
#7 : 440
#prime_at_a_time::compute_cliques_on_fixpoint_graph after compute_orbits_on_subsets
#generator::get_orbit_representatives
#orbits_on_k_sets: we found 440 orbits on 7-sets
#generator::get_orbit_representatives done
#We found 440 orbits of cliques of size 7 in the fixed point graph:
#   0    3    6  270  318  392 1592 
#...
#   1   98  102  537  538 1655 1674 
#prime_at_a_time::compute_cliques_on_fixpoint_graph done
#packing::cliques_on_fixpoint_graph done
#after P->cliques_on_fixpoint_graph
#isomorph_arguments::execute
#isomorph_arguments::execute done
#***************** The End **********************
#11:13

G2AT:
	- $(PACKINGS_PATH)/packing_main.out -v 6 $(ARGUMENTS) \
		-type_of_fixed_spreads 2 0 7

#			group_order = atoi(argv[++i]);
#			group_idx = atoi(argv[++i]);
#			clique_size = atoi(argv[++i]);


#packing_q4_go2_g0_fp_cliques_lvl_7
#-1 440 27779 in 10:29(42^4, 6^{50}, 2^{386}) average is 2 + 360 / 440

#types of cliques:
#$$
#\begin{array}{*{3}{c}}
#\hline
#\mbox{Type} & \# \, \mbox{Orbits} & \mbox{Stabilizer Orders} \\
#\hline
#\hline 
#( 0, 0, 1 ) & 440 & 42^4,\,6^{50},\,2^{386}\\
#\hline
#\end{array}
#$$

G2AL:
	- $(PACKINGS_PATH)/packing_main.out -v 6 $(ARGUMENTS) \
		-process_long_orbits 2 0 7 0 1 2 7

#			group_order = atoi(argv[++i]);
#			group_idx = atoi(argv[++i]);
#			clique_size = atoi(argv[++i]);
#			clique_no_r = atoi(argv[++i]);
#			clique_no_m = atoi(argv[++i]);
#			long_orbit_length = atoi(argv[++i]);
#			long_orbits_clique_size = atoi(argv[++i]);

#Number of long orbits = 6696

#Written file graph_long_packing_q4_go2_g0_2_7_0.bin of size 2855438


C0:
	$(TOOLS_PATH)/all_cliques.out -v 2 \
		-file packing_q4_go2_g0_csz7_cno0_graph.bin \
		-all_cliques_of_size 7 packing_q4_go2_g0_csz7_cno0_graph_solutions.txt \
		-print_level 7

#Written file graph_long_packing_q4_go2_g0_2_7_0_solutions.txt of size 29237
#nb_sol = 816
#decision_step_counter = 106362954
#0:17


X0:
	- $(PACKINGS_PATH)/packing_main.out -v 6 $(ARGUMENTS) \
		-expand_cliques_of_long_orbits 2 0 7 0 10000 2 7

#written file packing_q4_go2_g0_csz7_cno0_packings.csv of size 134604



I0:
	$(PROJECTIVE_SPACE_PATH)/projective_space_main.out -v 2 -n 3 -q 4 \
		-file_of_packings Spread_table.csv \
		-classify_nauty \
		-prefix PG_3_4_2A_C0_packings \
		-save PG_3_4_2A_C0_packings 


#		-fixed_structure_of_element_of_order 3 \
#		-fixed_structure_of_element_of_order 31 


#Written file graph_long_packing_q4_go2_g0_2_7_0_solutions.txt of size 29237
#nb_sol = 816
#decision_step_counter = 106362954

C1:
	$(TOOLS_PATH)/all_cliques.out -v 2 \
		-file packing_q4_go2_g0_csz7_cno1_graph.bin \
		-all_cliques_of_size 7 packing_q4_go2_g0_csz7_cno1_graph_solutions.txt \
		-print_level 7




################################################################################


	

CLASS_5A=-centralizer_of_element "0,2,0,0, 1,1,0,0, 0,0,3,0, 0,0,0,3, 0" -label "5A"

#		// 0 2 0 0
#		// 1 1 0 0
#		// 0 0 3 0
#		// 0 0 0 3
#		// normalizer has order 3600,
#		// 1019328 orbits on spreads
#		// The distribution of orbit lengths is: 1^48, 5^331044
#		// nb_points = 331092
#		// There are 48 orbits of length 1 :
#		// There are 331044 orbits of length 5 :
#		// The distribution of orbit lengths is: ( 12, 36 )
#		// strong_generators::orbits_on_points_schreier done, we found 2 orbits
#		// We found 2 orbits of N on the set of short orbits
#		// orbit group with 7 generators:
#		// i : orbit_first[i] : orbit_len[i]
#		// 0 : 0 : 36
#		// 1 : 36 : 12


CLASS_5B=-centralizer_of_element "0,2,0,0,1,1,0,0,0,0,0,2,0,0,1,1,0" -label "5B"

#Generator 0 / 1 is:
#0 2 0 0 
#1 1 0 0 
#0 0 0 2 
#0 0 1 1 
#, 0
#prime_at_a_time::make_normalizer_of_H_of_order_5 created generators for the normalizer
#Strong generators for a group of order 81600 tl=( 85, 4, 80, 1, 3, 1 )



CLASS_5C=-centralizer_of_element "0,1,0,0,3,3,0,0,0,0,1,2,0,0,2,0,0" -label "5C"

#Generator 0 / 1 is:
#0 1 0 0
#3 3 0 0
#0 0 1 2
#0 0 2 0
#, 0
#
#Normalizer has order 600
#Strong generators for a group of order 600 tl=( 10, 4, 5, 1, 3, 1 )
#prime_at_a_time::test_orbits We found 185512 orbits which are partial packings
#There are 8 orbits of length 1 : 
#There are 185504 orbits of length 5 : 
#schreier::compute_all_point_orbits found 2 orbits
#The distribution of orbit lengths is: ( 2, 6 )
#At depth 0, we are now selecting orbit rep 0 for orbit 0 / 2, an orbit of length 6
#The stabilizer is a group of order 100
#after we selected 0 / 8, the number of live points is ( 0, 89499 )


CLASS_5C=-centralizer_of_element "" -label "5C"



# elements of order 5:
#5 96768 22 38 39 54 81 76 40 62 37 77 63 64 36 42 74 75 35 65 41 23 1 20 21 47 84 30 18 14 10 2 80 58 51 26 5 72 66 34 70 45 32 68 59 25 50 13 16 7 11 48 57 27 83 3 8 17 15 85 29 55 46 69 31 44 71 53 24 78 60 4 52 61 79 33 67 73 43 28 82 49 56 6 9 12 19
#5 2193408 22 14 16 24 44 10 18 2 13 11 7 8 15 17 3 9 12 6 19 23 1 20 21 53 60 78 82 56 49 28 45 32 70 68 64 74 36 42 75 65 41 35 31 69 71 57 83 27 48 52 4 79 61 47 30 84 54 58 80 26 51 38 40 62 76 72 66 5 34 67 73 33 43 39 37 77 63 81 59 50 25 29 46 55 85
#5 13160448 20 84 46 72 38 48 29 56 54 27 82 28 47 55 83 57 30 49 85 21 22 23 1 33 68 44 80 60 52 25 76 41 37 64 2 16 3 12 13 10 19 8 65 42 77 24 51 59 79 43 66 31 70 61 81 26 53 32 71 5 67 17 6 14 11 39 74 62 35 36 63 75 40 9 15 7 18 69 45 73 34 50 4 78 58

group5A:
	- $(PACKINGS_PATH)/packing_main.out -v 6 $(ARGUMENTS) \
		-prime_at_a_time 5 0

# creates packing_q4_go5_g0_fixpoint_graph.bin
#28:31

#// group 0:
# 48 fixpoints
#// two orbits of N on short orbits:
#// pt 0 lies in an orbit of length 36, stabilizer has order 100, stored in group_0_stab_0.bin
# graph in group_0_graph_0.bin with 157649 vertices	
#We found 20960 orbits of N on the packings
#writing packings to file group_0_packings_iso_0.csv


#// pt 7 lies in an orbit of length 12, stabilizer has order 300, stored in group_0_stab_1.bin
# graph on 158227 vertices
#The distribution of orbit lengths is: ( 5^4, 10^2, 15^14, 20^12, 30^4, 60^6928 )
#strong_generators::orbits_on_points_schreier done, we found 6964 orbits
#We found 6964 orbits of N on the packings
#writing packings to file group_0_packings_iso_1.csv

# 20960 + 6964 = 27924

c00:
	$(TOOLS_PATH)/all_rainbow_cliques.out -v 2 -file group_0_graph_0.bin -all_cliques -no_colors 4 -solution_file



group5B:
	- $(PACKINGS_PATH)/packing_main.out -v 6 $(ARGUMENTS) \
		-prime_at_a_time 5 1

# orbit type: 1 fixpoint
# 4 graphs


c10:
	$(TOOLS_PATH)/all_rainbow_cliques.out -v 2 -file group_1_graph_0.bin -all_cliques -no_colors 4 -solution_file

#after we selected 0 / 613, the number of live points is ( 10, 58344 )
# nb_sol = 0 in 2 min 15


c11:
	$(TOOLS_PATH)/all_rainbow_cliques.out -v 2 -file group_1_graph_1.bin -all_cliques -no_colors 4 -solution_file


#after we selected 1 / 613, the number of live points is ( 230, 36200 )
# nb_sol = 0 in 35 sec


c12:
	$(TOOLS_PATH)/all_rainbow_cliques.out -v 2 -file group_1_graph_2.bin -all_cliques -no_colors 4 -solution_file


#at depth 0 selected_choice[cur_depth]=6 / 613
#after we selected 6 / 613, the number of live points is ( 45, 45280 )
# nb_sol = 0 in 1 min 4 sec


c13:
	$(TOOLS_PATH)/all_rainbow_cliques.out -v 2 -file group_1_graph_3.bin -all_cliques -no_colors 4 -solution_file

#after we selected 38 / 4, the number of live points is ( 0, 77792 )
#nb_sol = 2654720
#decision_step_counter = 41405264
# in 5 min 59 sec
# first orbit has length 16320 


#The distribution of orbit lengths is: ( 2720^8, 5440^4, 8160^8, 16320^156 )
#strong_generators::orbits_on_points_schreier done, we found 176 orbits
#We found 176 orbits of N on the packings




# orbit type: 6 fixpoints + 3 orbits of length 5:
# graph on 613 vertices
# 482 cliques of size 6
# case 253 / 482 : 736 live orbits : fp stab has order 5 : 160 packings (not orbits) : 160 isomorphism types
# case 398 / 482 : 654 live orbits : fp stab has order 10 : 80 packings (not orbits) : 40 isomorphism types
# case 481 / 482 : 540 live orbits : fp stab has order 50 : 160 packings (not orbits) : 16 isomorphism types
# total: 160 + 40 + 16 = 216 isomorphism types


f1:
	$(TOOLS_PATH)/all_rainbow_cliques.out -v 2 -file group_1_graph_on_fixpoints.bin -all_cliques -no_colors 6 -solution_file 


# many cliques


F1:
	$(TOOLS_PATH)/all_cliques.out -v 2 -file group_1_graph_on_fixpoints.bin -all_cliques -print_level 6


#the largest cliques have size 8
#  0 :   1
#  1 :   4
#  2 :   6
#  3 :  29
#  4 : 136
#  5 : 336
#  6 : 482
#  7 : 307
#  8 :  62
#group order 16320
#The 62 orbits at level 8 are:
#orbit : representative : stabilizer order : orbit length
#Orbit 0 is the set ( 1, 4, 11, 18, 24, 126, 247, 270 ) : 1 : 16320
#Orbit 1 is the set ( 1, 4, 11, 18, 24, 126, 270, 550 ) : 1 : 16320

# 482 orbits of cliques of size 6

f10:
	$(TOOLS_PATH)/all_rainbow_cliques.out -v 2 -file group_1_graph_0_fixpoints.bin -all_cliques -no_colors 5 -solution_file 


# 10 vertices, no cliques of size 5

f11:
	$(TOOLS_PATH)/all_rainbow_cliques.out -v 2 -file group_1_graph_1_fixpoints.bin -all_cliques -no_colors 5 -solution_file 


# 230 vertices, 311292 cliques of size 5

f11_10:
	$(TOOLS_PATH)/all_rainbow_cliques.out -v 2 -file group_1_graph_1_fixpoints.bin -all_cliques -no_colors 10 -solution_file 

#no solution

f12:
	$(TOOLS_PATH)/all_rainbow_cliques.out -v 2 -file group_1_graph_2_fixpoints.bin -all_cliques -no_colors 5 -solution_file 

# 45 vertices, 284 cliques of size 5

f13:
	$(TOOLS_PATH)/all_rainbow_cliques.out -v 2 -file group_1_graph_3_fixpoints.bin -all_cliques -no_colors 5 -solution_file 

# 230 vertices, 311292 cliques of size 5

f13_10:
	$(TOOLS_PATH)/all_rainbow_cliques.out -v 2 -file group_1_graph_3_fixpoints.bin -all_cliques -no_colors 10 -solution_file 

#no solution

stop:
	#// group 1:
	#// prime_at_a_time::test_orbits The distribution of orbit lengths is: 1^613, 5^77792
	#// four orbits of N on short orbits:
	#// The distribution of orbit lengths is: ( 1, 68, 136, 408 )
	#group_1_graph_0.bin 58344 vertices, no sol in 2 min 16 on MacBookPro
	#group_1_graph_1.bin 36200 vertices, no sol in 36 sec
	#group_1_graph_2.bin 45280 vertices, no sol in 1 min 6 sec
	#group_1_graph_3.bin 36200 vertices, no sol in 35 sec



group5C:
	- $(PACKINGS_PATH)/packing_main.out -v 6 $(ARGUMENTS) \
		-prime_at_a_time 5 2

#Generator 0 / 1 is:
#0 1 0 0
#3 3 0 0
#0 0 1 2
#0 0 2 0
#, 0
#
#Normalizer has order 600
#Strong generators for a group of order 600 tl=( 10, 4, 5, 1, 3, 1 )
#prime_at_a_time::test_orbits We found 185512 orbits which are partial packings
#There are 8 orbits of length 1 : 
#There are 185504 orbits of length 5 : 
#schreier::compute_all_point_orbits found 2 orbits
#The distribution of orbit lengths is: ( 2, 6 )
#At depth 0, we are now selecting orbit rep 0 for orbit 0 / 2, an orbit of length 6
#The stabilizer is a group of order 100
#after we selected 0 / 8, the number of live points is ( 0, 89499 )


c20:
	$(TOOLS_PATH)/all_rainbow_cliques.out -v 2 -file group_2_graph_0.bin -all_cliques -no_colors 4 -solution_file

#nb_sol = 53530 in 6 min 34 sec
#We found 2698 orbits of N on the packings
#writing packings to file group_2_packings_iso_0.csv

c21:
	$(TOOLS_PATH)/all_rainbow_cliques.out -v 2 -file group_2_graph_1.bin -all_cliques -no_colors 4 -solution_file

# nb_sol = 58700 in 7 min 22 sec

#We found 1034 orbits of N on the packings
#writing packings to file group_2_packings_iso_1.csv


# 2698 + 1034 = 3732 orbits

groups:
	- $(PACKINGS_PATH)/packing_main.out -v 6 $(ARGUMENTS) \
		-prime_at_a_time 0
	- $(PACKINGS_PATH)/packing_main.out -v 6 $(ARGUMENTS) \
		-prime_at_a_time 1
	- $(PACKINGS_PATH)/packing_main.out -v 6 $(ARGUMENTS) \
		-prime_at_a_time 2


rep0:
	$(PACKINGS_PATH)/packing_main.out -v 6 $(ARGUMENTS) \
		-make_element 0

rep1:
	$(PACKINGS_PATH)/packing_main.out -v 6 $(ARGUMENTS) \
		-make_element 1

rep2:
	$(PACKINGS_PATH)/packing_main.out -v 6 $(ARGUMENTS) \
		-make_element 2


centralizer0:
	$(PACKINGS_PATH)/packing_main.out -v 6 $(ARGUMENTS) \
		-centralizer 0

centralizers:
	- $(PACKINGS_PATH)/packing_main.out -v 6 $(ARGUMENTS) \
		-centralizer 0
	- $(PACKINGS_PATH)/packing_main.out -v 6 $(ARGUMENTS) \
		-centralizer 1
	- $(PACKINGS_PATH)/packing_main.out -v 6 $(ARGUMENTS) \
		-centralizer 2

starter:
	- mkdir STARTER_SPREADS
	$(PACKINGS_PATH)/packing_main.out -v 6 $(ARGUMENTS) \
		-starter \
		-W


# using the double 5 (group of order 5)
#We found 1019780 orbits
#We found 78405 orbits which are partial packings
#There are 613 orbits of length 1 : 
#There are 77792 orbits of length 5 : 

#We found 418600 packings in case orbit 0
#writing packings to file packings_0.csv


c0:
	$(TOOLS_PATH)/all_rainbow_cliques.out -v 2 -file graph_0.bin -all_cliques -no_colors 4 -solution_file

# group of order 3600 / 36 = 100
# short orbit 0:
#The distribution of orbit lengths is: ( 5^16, 10^36, 20^20908 )
# 16 + 36 + 20908 = 20960
# nb x ago
# 12 x 20
# 36 x 10
# 20908 x 5

c1:
	$(TOOLS_PATH)/all_rainbow_cliques.out -v 2 -file graph_1.bin -all_cliques -no_colors 4 -solution_file

# May 2, 2016 MacBookPro 49 min 58 sec
# group of order 3600 / 12 = 300
#The distribution of orbit lengths is: ( 5^4, 10^2, 15^14, 20^12, 30^4, 60^6928 )
# 4 + 2 + 14 + 12 + 4 + 6928 = 6964
# nb x ago
# 4 x 50
# 2 x 30
# 14 x 20
# 12 x 25
# 4 x 10
# 6928 x 5

# total: 20960 + 6964 = 27924

type0:
	$(PACKINGS_PATH)/packing_main.out -v 6 $(ARGUMENTS) \
		-type_of_packing packings_iso_0.csv

type1:
	$(PACKINGS_PATH)/packing_main.out -v 6 $(ARGUMENTS) \
		-type_of_packing packings_iso_1.csv




