#MY_PATH=../../..
MY_PATH=../../DEV.13
SRC=$(MY_PATH)/ORBITER/SRC
SRC2=$(MY_PATH)/ORBITER2/SRC2

HYPEROVAL_PATH=$(SRC)/HYPEROVAL
TREEDRAW_PATH=$(SRC2)/TREEDRAW


8:
	- mkdir CLASSIFY_8
	$(HYPEROVAL_PATH)/hyperoval.out -v 4 -q 8 -target_size 10 -compute_starter 10 CLASSIFY_8/ -W -T



draw_8:
	$(TREEDRAW_PATH)/treedraw.out  CLASSIFY_8/arc_8_10.tree 
	mpost CLASSIFY_8/arc_8_10.mp

#-x 1000000 -y 450000 
	

## 10
#10 0 1 2 3 28 38 43 56 61 71 1512 aaaaaaafaaaaaaagaaaaaaaaaaaaaaabaaaaaaacaaaaaaadaaaaaaafaaaaaaajaaaaaaaiaaaaaaahaaaaaaadaaaaaaabageaaabcahhaliamaegafeahabfekpbhlmianaalmkgapeal
#-1 1 15 in 
#clock ticks per second = 100
#0:00
#(1512) average is 1512 + 0 / 1


16:
	- mkdir CLASSIFY_16
	$(HYPEROVAL_PATH)/hyperoval.out -v 4 -q 16 -target_size 18 -compute_starter 18 CLASSIFY_16/ -W -T

## 18
#18 0 1 2 3 52 67 89 106 126 141 159 176 184 199 220 235 245 262 144 aaaaaaafaaaaaaadaaaaaaaaaaaaaaabaaaaaaacaaaaaaadaaaaaaafaaaaaabcaaaaaaabaaaaaaaiaaaaaaabaaaaaaabafaaafgbdffhecjiekbcindelkjbcl
#18 0 1 2 3 52 70 83 109 127 139 156 174 186 199 217 229 256 264 16320 aaaaaaafaaaaaaaiaaaaaaaaaaaaaaabaaaaaaacaaaaaaadaaaaaaafaaaaaabbaaaaaabaaaaaaaapaaaaaaaeaaaaaaabaoaaalaaceanaaafaabeanaaalcgdfacaaadcddbambaifidbhaoiahkbbbbkehfiealbalpomfigpao
#-1 2 4212 in 
#clock ticks per second = 100
#0:3
#(16320, 144) average is 8232 + 0 / 2


draw_16:
	$(TREEDRAW_PATH)/treedraw.out -x 1000000 -y 450000 CLASSIFY_16/arc_16_18.tree  
	mpost CLASSIFY_16/arc_16_18.mp

conv_16:
	/sw/bin/convert -density 600x600 -trim view.ps hyperoval_16_tree.png


32:
	- mkdir CLASSIFY_32
	$(HYPEROVAL_PATH)/hyperoval.out -v 4 -q 32 -target_size 34 -compute_starter 7 CLASSIFY_32/ -W



#Found 1031750 orbits at depth 8
#0 : 1 orbits
#1 : 1 orbits
#2 : 1 orbits
#3 : 1 orbits
#4 : 1 orbits
#5 : 3 orbits
#6 : 213 orbits
#7 : 16593 orbits
#8 : 1031750 orbits
#total: 1048564
## of calls to image_of/mult/invert/retrieve/store: 238694102/100866468/76606375/82780173/7316127
#(8, 5^{28}, 4^9, 2^{2797}, 1^{1028915}) average is 1 + 2943 / 1031750

lift:
	$(HYPEROVAL_PATH)/hyperoval.out -v 6 -q 32 -target_size 34 -lift 7 CLASSIFY_32/ -lex -solve

# May 11, 2013 on MacBook: 13 min 29 sec, finds 82259 'solutions' (warning: some solutions some may not be arcs)
#written file CLASSIFY_32/arc_32_depth_7_solutions.txt of size 11069972
#written file CLASSIFY_32/arc_32_depth_7_statistics.csv of size 375084
#exact_cover::compute_liftings done
#arc_generator::compute_lifts done
#13:29
#total_solutions = 82209
#nb_deleted_solutions=50


# -split 0 100000 


32_read_solutions:
	$(HYPEROVAL_PATH)/hyperoval.out -v 6 -q 32 -target_size 34 \
		-read_solutions 7 CLASSIFY_32/ \
		-solution_file CLASSIFY_32/arc_32_depth_7_solutions.txt

32_compute_orbits:
	$(HYPEROVAL_PATH)/hyperoval.out -v 6 -q 32 -target_size 34 \
		-compute_orbits 7 CLASSIFY_32/ 

32_classify:
	$(HYPEROVAL_PATH)/hyperoval.out -v 2 -q 32 -target_size 34 \
		-classify 7 CLASSIFY_32/ 

#We found 6 isomorphism types
#representatives::save
#representatives::write_fusion
#representatives::write_fusion finished
#written file CLASSIFY_32/ISO/classification_fusion.txt of size 820186
#written file CLASSIFY_32/ISO/classification_fusion_ge.bin of size 492090
#representatives::write_representatives_and_stabilizers
#representatives::write_representatives_and_stabilizers finished
#written file CLASSIFY_32/ISO/classification_reps.txt of size 366
#written file CLASSIFY_32/ISO/classification_stabgens.bin of size 108
#representatives::save done
#isomorph::setup_and_open_solution_database
#Written file CLASSIFY_32/ISO/orbits.txt of size 831
#isomorph_testing done
#1:8:22

32_report:
	$(HYPEROVAL_PATH)/hyperoval.out -v 2 -q 32 -target_size 34 \
		-report 7 CLASSIFY_32/ 


64:
	- mkdir CLASSIFY_64
	$(HYPEROVAL_PATH)/hyperoval.out -v 4 -q 64 -target_size 66 -compute_starter 7 CLASSIFY_64/ -W


#Found 1443326 orbits at depth 7
#0 : 1 orbits
#1 : 1 orbits
#2 : 1 orbits
#3 : 1 orbits
#4 : 1 orbits
#5 : 11 orbits
#6 : 3255 orbits
#7 : 1443326 orbits
#total: 1446597
## of calls to image_of/mult/invert/retrieve/store: 216410517/125529149/99075260/102086016/8669371
#(84, 36, 18, 12, 6^{36}, 4^{35}, 3^{117}, 2^{3584}, 1^{1439550}) average is 1 + 4249 / 1443326
# May 11 2013: around 30 minutes on MacBook 

lift64:
	$(HYPEROVAL_PATH)/hyperoval.out -v 6 -q 64 -target_size 66 -lift 7 CLASSIFY_64/ -W -lex -solve -split 10 10000000


