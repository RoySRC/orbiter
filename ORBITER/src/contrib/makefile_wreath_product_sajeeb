MY_PATH=~/DEV.19/GITHUB/orbiter
#MY_PATH=/scratch2/betten/COMPILE/orbiter
SRC=$(MY_PATH)/ORBITER/src
SRC2=$(MY_PATH)/ORBITER2/src2

GROUPS_PATH=$(SRC)/apps/groups
GRAPH_THEORY_PATH=$(SRC)/apps/graph_theory



update:
	cd $(GROUPS_PATH); make clean;
	cd $(SRC); make cleana; git pull; make 


update_all:
	cd $(SRC); make clean; git pull; make 


w4r:
	- $(GROUPS_PATH)/wreath_product.out -v 8  \
		-nb_factors 4 -d 2 -q 2 -depth 1 \
		-report
	pdflatex WreathProduct_q2_n4.tex
	open WreathProduct_q2_n4.pdf

w4pc:
	$(GROUPS_PATH)/wreath_product.out -v 8  \
		-nb_factors 4 -d 2 -q 2 -depth 1 \
		-poset_classify 2 \
		-w -W \
		-draw_poset \
		-export_schreier_trees \
		-tools_path $(GRAPH_THEORY_PATH) \
		-report


#		-report

#depth 4 completed, found 144 orbits
#0 : 1 orbits
#1 : 1 orbits
#2 : 4 orbits
#3 : 20 orbits
#4 : 144 orbits
#total: 170
#(64^2, 48, 32^2, 24^3, 16^8, 12^7, 8^{16}, 6^4, 4^{36}, 2^{49}, 1^{16}) average is 6 + 70 / 144


w4p:
	date
	$(GROUPS_PATH)/wreath_product.out -v 2  \
		-nb_factors 4 -d 2 -q 2 -depth 1 -permutations 
	date

w4o:
	date
	$(GROUPS_PATH)/wreath_product.out -v 2  \
		-nb_factors 4 -d 2 -q 2 -depth 1 -orbits
	date



w4tr:
	date
	$(GROUPS_PATH)/wreath_product.out -v 2  \
		-nb_factors 4 -d 2 -q 2 -depth 1 -tensor_ranks
	date



#tensor ranks of orbit representatives:
#i : orbit length[i] : ago : PG rank of rep[i] : tensor rank [i] : affine rank of rep(i) : rank one decomposition
#0 : 81 : 384 : 0 : 1 : 1 : 1,
#1 : 324 : 96 : 19 : 2 : 6 : 4,2,
#2 : 648 : 48 : 33 : 3 : 22 : 16,4,2,
#3 : 1296 : 24 : 35 : 2 : 24 : 16,8,
#4 : 144 : 216 : 116 : 3 : 107 : 170,192,1,
#5 : 162 : 192 : 285 : 4 : 278 : 256,16,4,2,
#6 : 3888 : 8 : 287 : 3 : 280 : 256,16,8,
#7 : 2592 : 12 : 307 : 3 : 300 : 256,32,12,
#8 : 2592 : 12 : 367 : 4 : 360 : 256,170,192,2,
#9 : 2592 : 12 : 369 : 3 : 362 : 256,170,192,
#10 : 648 : 48 : 391 : 2 : 384 : 256,128,
#11 : 3888 : 8 : 393 : 3 : 386 : 256,128,2,
#12 : 7776 : 4 : 397 : 3 : 390 : 257,136,15,
#13 : 5184 : 6 : 413 : 4 : 406 : 257,85,192,2,
#14 : 108 : 288 : 1637 : 4 : 1632 : 1024,512,64,32,
#15 : 972 : 32 : 1638 : 4 : 1633 : 1285,768,68,32,
#16 : 1944 : 16 : 1639 : 4 : 1634 : 514,1024,64,32,
#17 : 648 : 48 : 1648 : 5 : 1643 : 2570,3072,64,32,1,
#18 : 1944 : 16 : 1655 : 4 : 1650 : 514,1024,80,32,
#19 : 7776 : 4 : 1661 : 4 : 1656 : 3084,2560,68,48,
#20 : 1296 : 24 : 1717 : 4 : 1712 : 1024,512,160,16,
#21 : 7776 : 4 : 1718 : 4 : 1713 : 514,1024,51,128,
#22 : 648 : 48 : 5739 : 5 : 5736 : 16448,21760,768,32,8,
#23 : 1296 : 24 : 5740 : 5 : 5737 : 16448,771,21760,34,8,
#24 : 1296 : 24 : 5764 : 5 : 5761 : 4096,1024,512,128,1,
#25 : 3888 : 8 : 5766 : 4 : 5763 : 771,4352,1024,128,
#26 : 3888 : 8 : 5774 : 4 : 5771 : 771,4352,1024,136,
#27 : 216 : 144 : 6386 : 3 : 6383 : 4112,2048,255,
#28 : 24 : 1296 : 27582 : 6 : 27581 : 17476,8192,3840,240,8,1,
#classify::get_set_partition_and_types
#classify::get_set_partition_and_types done
#classification of orbit reps by tensor rank:
#6, 5^4, 4^12, 3^8, 2^3, 1



w5:
	$(GROUPS_PATH)/wreath_product.out -v 2  \
		-nb_factors 5 -d 2 -q 2 -depth 1


w5p:
	date
	$(GROUPS_PATH)/wreath_product.out -v 2  \
		-nb_factors 5 -d 2 -q 2 -depth 1 -permutations 
	date

w5o:
	date
	$(GROUPS_PATH)/wreath_product.out -v 2  \
		-nb_factors 5 -d 2 -q 2 -depth 1 -orbits
	date

w5r:
	date
	$(GROUPS_PATH)/wreath_product.out -v 2  \
		-nb_factors 5 -d 2 -q 2 -depth 1 -orbits_restricted tensor_q2_w5_rank_9.csv
	date

w5_extract9:
	$(TOOLS_PATH)/read_vector_and_extract_set.out -v 2 -file tensor_q2_w5_ranks.bin -extract 9 tensor_q2_w5_rank_9.csv



w5_extract:
	$(TOOLS_PATH)/read_vector_and_extract_set.out -v 2 -file tensor_q2_w5_ranks.bin -extract_values 1 9 tensor_q2_w5_rank_%d.bin


w5tr:
	cp $(GROUPS_PATH)/wreath_product.out .
	date
	./wreath_product.out -v 2  \
		-nb_factors 5 -d 2 -q 2 -depth 1 -tensor_ranks
	date




